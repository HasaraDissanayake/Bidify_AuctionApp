////  WishlistView.swift//  Bidify_AuctionApp////  Created by Hasara Dissanayake on 5/4/25.//import SwiftUIstruct WishlistView: View {    @EnvironmentObject var bidManager: BidManager        @State private var selectedItem: Bid_Item? = nil    @State private var navigateToItem = false    let dateFormatter: DateFormatter = {        let df = DateFormatter()        df.dateStyle = .medium        df.timeStyle = .short        return df    }()        var body: some View {        NavigationView {            VStack(spacing: 0) {                // Header                HStack {                    Text("Wish List")                        .font(.title2)                        .fontWeight(.bold)                        .foregroundColor(.accentColor)                    Spacer()                }                .padding()                .background(Color.white)                .shadow(color: Color.gray.opacity(0.2), radius: 4, x: 0, y: 2)                                // Wishlist content                ScrollView {                    VStack(spacing: 16) {                        ForEach(bidManager.wishlistItems) { item in                            WishlistItemCard(item: item, dateFormatter: dateFormatter,                                             removeAction: {                                                 bidManager.removeFromWishlist(item)                                             },                                             placeBidAction: {                                                 selectedItem = item                                                 navigateToItem = true                                             })                        }                    }                    .padding()                }                                Spacer()                                Divider()                    .padding()                    .foregroundColor(.teal)                                // Hidden NavigationLink                NavigationLink(                    destination: ItemContentView(item: selectedItem ?? bidManager.wishlistItems.first!), // fallback safety                    isActive: $navigateToItem                ) {                    EmptyView()                }                .hidden()            }            .navigationBarHidden(true)        }    }}struct WishlistItemCard: View {    let item: Bid_Item    let dateFormatter: DateFormatter    let removeAction: () -> Void    let placeBidAction: () -> Void        var body: some View {        VStack(alignment: .leading, spacing: 12) {            HStack {                if let uiImage = item.image {                    Image(uiImage: uiImage)                        .resizable()                        .scaledToFit()                        .frame(width: 60, height: 60)                        .cornerRadius(8)                } else {                    Image(systemName: "photo")                        .resizable()                        .scaledToFit()                        .frame(width: 60, height: 60)                        .foregroundColor(.gray)                }                                VStack(alignment: .leading, spacing: 4) {                    Text(item.itemName)                        .font(.headline)                        .foregroundColor(.accentColor)                                        Text("Condition: \(item.condition)")                        .font(.subheadline)                        .foregroundColor(.secondary)                                        Text("Added: \(dateFormatter.string(from: item.createdDate))")                        .font(.footnote)                        .foregroundColor(.gray)                }                                Spacer()            }                        HStack(spacing: 12) {                Button(action: removeAction) {                    Text("Remove")                        .fontWeight(.semibold)                        .padding(.horizontal, 27)                        .padding(.vertical, 10)                        .background(Color.red)                        .foregroundColor(.white)                        .cornerRadius(10)                }                                Button(action: placeBidAction) {                    Text("Place a Bid")                        .fontWeight(.semibold)                        .padding(.horizontal, 27)                        .padding(.vertical, 10)                        .background(Color.teal)                        .foregroundColor(.white)                        .cornerRadius(10)                }            }        }        .padding()        .background(Color.white)        .cornerRadius(12)        .shadow(color: Color.gray.opacity(0.15), radius: 5, x: 0, y: 3)    }}struct WishlistView_Previews: PreviewProvider {    static var previews: some View {        WishlistView().environmentObject(BidManager())    }}